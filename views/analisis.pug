extends base

block main
  section.section
    .row
      .col-lg-12
        .card
          .card-body
            h5.card-title Compare Dataset
            
            #accordion.accordion
              .accordion-item
                h2#heading.accordion-header
                  button.accordion-button.collapsed(type='button' data-bs-toggle='collapse' data-bs-target='#collapse-accordion' aria-expanded='false' aria-controls='collapse-accordion')
                    | Plot Data
                #collapse-accordion.accordion-collapse.collapse.show(aria-labelledby='heading' data-bs-parent='#accordion')
                  .accordion-body.row
                    .col-12.mb-3
                      legend.col-form-label.fw-bold Data Cuaca
                      if cuaca.length > 0
                        - const cuaca_attr = ['temperatur_avg', 'kelembaban_avg', 'kecepatan_angin_avg', 'jum_curah_hujan', 'jum_hari_hujan', 'penyinaran_matahari_avg'];
                        each attr in cuaca_attr
                          -
                            const attr_display = attr.replace(/_/g, ' ').replace(/\b\w/g, (char) => char.toUpperCase());
                            const attr_data = cuaca.map((el) => { 
                              const obj = {};
                              obj.tanggal = el.tanggal;
                              obj[attr] = el[attr];
                              return obj;
                            });
                          .form-check.form-check-inline.form-switch
                            input.form-check-input.btn-switch-plot-data(type='checkbox' role='switch' id=attr data-attr-data=`${JSON.stringify(attr_data)}`)
                            label.form-check-label(for=attr)= attr_display
                      else
                        p No data

                    .col-lg-4.mb-3
                      legend.col-form-label.fw-bold Data Wisatawan
                      if wisatawan.length > 0
                        - const wisatawan_attr = ['jum_wisnus', 'jum_wisman'];
                        each attr in wisatawan_attr
                          -
                            const attr_display = attr.replace(/_/g, ' ').replace(/\b\w/g, (char) => char.toUpperCase());
                            const attr_data = wisatawan.map((el) => { 
                              const obj = {};
                              obj.tanggal = el.tanggal;
                              obj[attr] = el[attr];
                              return obj;
                            });
                          .form-check.form-check-inline.form-switch
                            input.form-check-input.btn-switch-plot-data(type='checkbox' role='switch' id=attr data-attr-data=`${JSON.stringify(attr_data)}`)
                            label.form-check-label(for=attr)= attr_display
                      else
                        p No data
                    
                    .col-lg-4.mb-3
                      legend.col-form-label.fw-bold Data Kecelakaan
                      if kecelakaan.length > 0
                        - const kecelakaan_attr = ['jum_kecelakaan'];
                        each attr in kecelakaan_attr
                          -
                            const attr_display = attr.replace(/_/g, ' ').replace(/\b\w/g, (char) => char.toUpperCase());
                            const attr_data = kecelakaan.map((el) => { 
                              const obj = {};
                              obj.tanggal = el.tanggal;
                              obj[attr] = el[attr];
                              return obj;
                            });
                          .form-check.form-check-inline.form-switch
                            input.form-check-input.btn-switch-plot-data(type='checkbox' role='switch' id=attr data-attr-data=`${JSON.stringify(attr_data)}`)
                            label.form-check-label(for=attr)= attr_display
                      else
                        p No data

                    .col-lg-4.mb-3
                      legend.col-form-label.fw-bold Clustering Result
                      if clustering_result.length > 0
                        - const clustering_result_attr = ['cluster'];
                        each attr in clustering_result_attr
                          -
                            const attr_display = attr.replace(/_/g, ' ').replace(/\b\w/g, (char) => char.toUpperCase());
                            const attr_data = clustering_result.map((el) => { 
                              const obj = {};
                              obj.tanggal = el.tanggal;
                              obj[attr] = el[attr];
                              return obj;
                            });
                          .form-check.form-check-inline.form-switch
                            input.form-check-input.btn-switch-plot-data(type='checkbox' role='switch' id=attr data-attr-data=`${JSON.stringify(attr_data)}`)
                            label.form-check-label(for=attr)= attr_display
                      else
                        p No data
            //- End of accordion

            canvas#chart-analisis(style='max-height: 400px;' data-clustering-result=`${JSON.stringify(clustering_result)}`)

